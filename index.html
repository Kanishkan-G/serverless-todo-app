<!DOCTYPE html>
<html>
<head>
  <title>üöÄ Serverless To-Do</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Segoe UI', sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh; padding: 20px;
    }
    .app { 
      max-width: 600px; margin: 0 auto; 
      background: rgba(255,255,255,0.95); 
      border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    .header { 
      background: linear-gradient(135deg, #ff6b6b, #feca57); 
      color: white; text-align: center; padding: 30px; 
    }
    .header h1 { font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
    .main { padding: 40px; }
    .input-section { display: flex; gap: 15px; margin-bottom: 30px; }
    .task-input { 
      flex: 1; padding: 15px 20px; border: 2px solid #e1e5e9; 
      border-radius: 50px; font-size: 16px; outline: none; 
      transition: all 0.3s ease;
    }
    .task-input:focus { border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
    .add-btn { 
      padding: 15px 30px; background: linear-gradient(135deg, #667eea, #764ba2); 
      color: white; border: none; border-radius: 50px; font-size: 16px; 
      font-weight: 600; cursor: pointer; transition: all 0.2s ease;
    }
    .add-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(102,126,234,0.3); }
    .stats { 
      display: flex; justify-content: space-between; margin-bottom: 30px; 
      padding: 15px; background: #f8f9fa; border-radius: 15px; font-weight: 600; 
    }
    .task-list { list-style: none; }
    .task-item { 
      display: flex; align-items: center; padding: 20px; margin-bottom: 15px; 
      background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }
    .task-item:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
    .task-item.completed { 
      opacity: 0.7; background: linear-gradient(135deg, #a8e6cf, #88d8a3);
    }
    .task-checkbox { width: 20px; height: 20px; cursor: pointer; accent-color: #667eea; }
    .delete-btn { 
      background: #ff6b6b; color: white; border: none; width: 45px; height: 45px; 
      border-radius: 50%; cursor: pointer; font-size: 18px; transition: all 0.2s ease;
    }
    .delete-btn:hover { background: #ff5252; transform: scale(1.1); }
    .backend-status { color: #666; text-align: center; padding: 20px; }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <h1>üöÄ Serverless To-Do</h1>
      <p>AWS Amplify + Lambda + DynamoDB</p>
    </div>
    <div class="main">
      <div class="input-section">
        <input id="taskInput" class="task-input" placeholder="Add a new task..." />
        <button class="add-btn" onclick="addTask()">+ Add Task</button>
      </div>
      <div class="stats">
        <span id="remaining">0 remaining</span>
        <span id="completed">0 completed</span>
      </div>
      <ul id="taskList" class="task-list"></ul>
      <div id="status" class="backend-status">Backend setup next ‚Üí DynamoDB + Lambda</div>
    </div>
  </div>

  <script>
    const API_URL = 'YOUR_API_GATEWAY_URL'; // Replace after backend
    let tasks = [];

    function updateStats() {
      const remaining = tasks.filter(t => !t.completed).length;
      const completed = tasks.filter(t => t.completed).length;
      document.getElementById('remaining').textContent = `${remaining} remaining`;
      document.getElementById('completed').textContent = `${completed} completed`;
    }

    async function fetchTasks() {
      try {
        const res = await fetch(API_URL);
        tasks = await res.json();
        document.getElementById('status').textContent = 'Backend connected!';
      } catch(e) {
        document.getElementById('status').textContent = 'Frontend ready ‚Üí DynamoDB next';
      }
      renderTasks();
      updateStats();
    }

    function renderTasks() {
      const list = document.getElementById('taskList');
      list.innerHTML = tasks.map(t => `
        <li class="task-item ${t.completed ? 'completed' : ''}">
          <div style="flex:1;display:flex;align-items:center;gap:15px;">
            <input type="checkbox" class="task-checkbox" 
                   ${t.completed ? 'checked' : ''} 
                   onchange="toggleTask('${t.id}')">
            <span class="task-title">${t.title}</span>
          </div>
          <button class="delete-btn" onclick="deleteTask('${t.id}')">üóëÔ∏è</button>
        </li>
      `).join('');
    }

    async function addTask() {
      const title = document.getElementById('taskInput').value.trim();
      if (!title) return;
      
      const task = { id: Date.now().toString(), title, completed: false };
      try {
        await fetch(API_URL, {
          method: 'PUT',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(task)
        });
      } catch(e) {}
      
      document.getElementById('taskInput').value = '';
      fetchTasks();
    }

    async function toggleTask(id) {
      const task = tasks.find(t => t.id === id);
      task.completed = !task.completed;
      try {
        await fetch(API_URL, {
          method: 'PUT',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(task)
        });
      } catch(e) {}
      fetchTasks();
    }

    async function deleteTask(id) {
      try {
        await fetch(`${API_URL}/${id}`, { method: 'DELETE' });
      } catch(e) {}
      fetchTasks();
    }

    document.getElementById('taskInput').addEventListener('keypress', e => {
      if (e.key === 'Enter') addTask();
    });

    fetchTasks(); // Load on start
  </script>
</body>
</html>
